import numpy as np 
import cv2 as cv 
K = np.array([[3351, 0.0, 2016.0],
             [0.0, 3351, 1512.0], 
             [0.0, 0.0, 1.0]],dtype=np.float32)
rvec = np.array([0.15, 0.04, 0.09],dtype=np.float32)
tvec = np.array([[-0.12],[0.196],[0.1735]],dtype=np.float32) 
rotm, _ = cv.Rodrigues(rvec)
print('rotm = {0}'.format(rotm))
X = np.array([[-0.6], [-0.26], [0.99]],dtype=np.float32)
print(np.dot(K,(np.dot(rotm, X) + tvec)))
'''
R1=np.array([[ 0.00427284, -0.95528867, -0.29564387],
 [ 0.96252031, 0.08410186,-0.25784014],
 [ 0.27117596,-0.28346152, 0.9198441 ]], dtype=np.float32)

R2=np.array([[ 3.09238120e-03, -9.99975894e-01, 6.21681446e-03],
 [ 8.37976158e-01, -8.01232140e-04, -5.45706255e-01],
 [ 5.45698082e-01, 6.89707405e-03, 8.37953480e-01]],dtype=np.float32)
t1 = np.array([[ 4.0444291 ],
       [-3.92959324],
       [26.74290568]],dtype=np.float32)

t2 = np.array([[ 2.69250133],
       [-2.89345395],
       [27.59065277]],dtype=np.float32)

#R = np.dot(np.linalg.inv(R1), R2)
X = np.array([[1],[1],[1]],dtype=np.float32)

#print('R = {0}'.format(R))
#print('T = {0}'.format(np.dot(R, t1 - t2)))

C1 = np.dot(R1,X) + t1
C2 = np.dot(R2,X) + t2
print('C1 = {0}'.format(C1))
print('C2 = {0}'.format(C2))

R = np.array([[ 0.9522574, -0.08826555, 0.29225851],
 [ 0.16745726,  0.95144806, -0.25827245],
 [-0.25527223, 0.29488266, 0.92080416]],dtype=np.float32)
T = np.array([[ 0.72664935],
 [-0.56110252],
 [-0.39641478]],dtype=np.float32)
#R = np.dot(np.linalg.inv(R2), R1)

diff = np.dot(R,C1) + np.dot(R.T,-T) - C2
print('diff = {0}'.format(diff))
'''
'''
R = [[ 0.9522574  -0.08826555  0.29225851]
 [ 0.16745726  0.95144806 -0.25827245]
 [-0.25527223  0.29488266  0.92080416]]
 T = [[ 0.72664935]
 [-0.56110252]
 [-0.39641478]]

 T = [[ 0.72664935]
 [-0.56110252]
 [-0.39641478]]
p2 = [[ 0.9522574  -0.08826555  0.29225851 -0.62562765]
 [ 0.16745726  0.95144806 -0.25827245  0.30979418]
 [-0.25527223  0.29488266  0.92080416  0.71597319]]

'''
